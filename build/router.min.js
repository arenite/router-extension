Arenite.Router=function(n){var e={},o=function(n,o){0!==n.indexOf("#")&&(n="#"+n),e.toKeyArray(e).forEach(function(i){var t=e[i].regex.exec(n);t&&(t.splice(0,1),r(i,t,e[i].vars,o?n:o))})},r=function(o,r,i,t){e[o].executions.forEach(function(e){if(t&&window.location.hash!=t)return void(window.location.hash=t);var c=JSON.parse(JSON.stringify(e));"function"==typeof e.func&&(c.func=e.func,c.args=[{ref:"arenite"}]),c.args||(c.args=[]);var a={};r.forEach(function(n,e){a[i[e]]=n}),c.args.push({value:a}),window.console.log('Arenite.Router: Executing route "'+o+'" with:',c),n.di.exec(c)})},i=function(){o(window.location.hash)},t=function(n,e){e||(document.body.onhashchange=i),n.toKeyArray().forEach(function(e){c(e,n[e])}),i()},c=function(n,o){var r="^#"+n.replace(/:[^\/]+/g,"([^/]+)")+"$",i=n.match(/:[^\/]+/g);i.forEach(function(n,e){i[e]=n.substring(1)}),e[n]={executions:o,regex:new RegExp(r),vars:i}},a=function(n){delete e[n]};return{init:t,add:c,remove:a,trigger:o}};