Arenite.Router=function(n){var e={},o=function(n,o){0!==n.indexOf("#")&&(n="#"+n),e.toKeyArray(e).forEach(function(i){var r=e[i].regex.exec(n);r&&(r.splice(0,1),t(i,r,e[i].vars,o?n:o))})},i=function(n){0!==n.indexOf("#")&&(n="#"+n),history.replaceState(void 0,void 0,n)},t=function(o,i,t,r){e[o].executions.forEach(function(e){if(r&&window.location.hash!==r)return void(window.location.hash=r);var c=JSON.parse(JSON.stringify(e));"function"==typeof e.func&&(c.func=e.func,c.args=[{ref:"arenite"}]),c.args||(c.args=[]);var a={};i.forEach(function(n,e){a[t[e]]=n}),c.args.push({value:a}),window.console.log('Arenite.Router: Executing route "'+o+'" with:',c),n.di.exec(c)})},r=function(){_skip?_skip=!1:o(window.location.hash)},c=function(n,e){e||(document.body.onhashchange=r),n.toKeyArray().forEach(function(e){a(e,n[e])}),r()},a=function(n,o){var i="^#"+n.replace(/:[^\/]+/g,"([^/]+)")+"$",t=n.match(/:[^\/]+/g);t.forEach(function(n,e){t[e]=n.substring(1)}),e[n]={executions:o,regex:new RegExp(i),vars:t}},u=function(n){delete e[n]};return{init:c,add:a,remove:u,trigger:o,update:i}};