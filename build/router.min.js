Arenite.Router=function(n){var e={},o=function(n,o){0!==n.indexOf("#")&&(n="#"+n),e.toKeyArray(e).forEach(function(t){var c=e[t].regex.exec(n);c&&(c.splice(0,1),r(t,c,e[t].vars,o?n:o))})},r=function(o,r,t,c){e[o].executions.forEach(function(e){var i=JSON.parse(JSON.stringify(e));"function"==typeof e.func&&(i.func=e.func,i.args=[{ref:"arenite"}]),i.args||(i.args=[]);var a={};r.forEach(function(n,e){a[t[e]]=n}),i.args.push({value:a}),window.console.log('Arenite.Router: Executing route "'+o+'" with:',i),c&&(window.location.hash=c),n.di.exec(i)})},t=function(){o(window.location.hash)},c=function(n,e){e||(document.body.onhashchange=t),n.toKeyArray().forEach(function(e){i(e,n[e])}),t()},i=function(n,o){var r="^#"+n.replace(/:[^/]+/g,"([^/]+)")+"$",t=n.match(/:[^/]+/g);t.forEach(function(n,e){t[e]=n.substring(1)}),e[n]={executions:o,regex:new RegExp(r),vars:t}},a=function(n){delete e[n]};return{init:c,add:i,remove:a,trigger:o}};