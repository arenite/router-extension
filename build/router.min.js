Arenite.Router=function(n){var o={},e=!1,i=function(n,e){0!==n.indexOf("#")&&(n="#"+n),o.toKeyArray(o).forEach(function(i){var t=o[i].regex.exec(n);t&&(t.splice(0,1),r(i,t,o[i].vars,e?n:e))})},t=function(n){e=!0,0!==n.indexOf("#")&&(n="#"+n),window.location=n},r=function(e,i,t,r){o[e].executions.forEach(function(o){if(r&&window.location.hash!==r)return void(window.location.hash=r);var c=JSON.parse(JSON.stringify(o));"function"==typeof o.func&&(c.func=o.func,c.args=[{ref:"arenite"}]),c.args||(c.args=[]);var a={};i.forEach(function(n,o){a[t[o]]=n}),c.args.push({value:a}),window.console.log('Arenite.Router: Executing route "'+e+'" with:',c),n.di.exec(c)})},c=function(){e?e=!1:i(window.location.hash)},a=function(n,o){o||(document.body.onhashchange=c),n.toKeyArray().forEach(function(o){u(o,n[o])}),c()},u=function(n,e){var i="^#"+n.replace(/:[^\/]+/g,"([^/]+)")+"$",t=n.match(/:[^\/]+/g);t.forEach(function(n,o){t[o]=n.substring(1)}),o[n]={executions:e,regex:new RegExp(i),vars:t}},f=function(n){delete o[n]};return{init:a,add:u,remove:f,trigger:i,update:t}};