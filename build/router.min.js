Arenite.Router=function(n){var e={},o=function(o,t){0!==o.indexOf("#")&&(o="#"+o),n.object.keys(e).forEach(function(n){var i=e[n].regex.exec(o);i&&(i.splice(0,1),c(n,i,e[n].vars,t?o:t))})},c=function(o,c,t,i){e[o].executions.forEach(function(e){var r=JSON.parse(JSON.stringify(e));"function"==typeof e.func&&(r.func=e.func,r.args=[{ref:"arenite"}]),r.args||(r.args=[]);var a={};c.forEach(function(n,e){a[t[e]]=n}),r.args.push({value:a}),window.console.log('Arenite.Router: Executing route "'+o+'" with:',r),i&&(window.location.hash=i),n.di.exec(r)})},t=function(){o(window.location.hash)},i=function(e,o){o||(document.body.onhashchange=t),n.object.keys(e).forEach(function(n){r(n,e[n])}),n.config.context.start.splice(0,0,{func:t})},r=function(n,o){var c="^#"+n.replace(/:[^/]+/g,"([^/]+)")+"$",t=n.match(/:[^/]+/g);t.forEach(function(n,e){t[e]=n.substring(1)}),e[n]={executions:o,regex:new RegExp(c),vars:t}},a=function(n){delete e[n]};return{init:i,add:r,remove:a,trigger:o}};