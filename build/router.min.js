Arenite.Router=function(n){var e={},o=function(o,c){0!==o.indexOf("#")&&(o="#"+o),n.object.keys(e).forEach(function(n){var i=e[n].regex.exec(o);i&&(i.splice(0,1),t(n,i,e[n].vars,c?o:c))})},t=function(o,t,c,i){e[o].executions.forEach(function(e){var r=JSON.parse(JSON.stringify(e));"function"==typeof e.func&&(r.func=e.func,r.args=[{ref:"arenite"}]),r.args||(r.args=[]);var a={};t.forEach(function(n,e){a[c[e]]=n}),r.args.push({value:a}),window.console.log('Arenite.Router: Executing route "'+o+'" with:',r),i&&(window.location.hash=i),n.di.exec(r)})},c=function(){o(window.location.hash)},i=function(e,o){o||(document.body.onhashchange=c),n.object.keys(e).forEach(function(n){r(n,e[n])}),n.config.context.start.push({func:c})},r=function(n,o){var t="^#"+n.replace(/:[^/]+/g,"([^/]+)")+"$",c=n.match(/:[^/]+/g);c.forEach(function(n,e){c[e]=n.substring(1)}),e[n]={executions:o,regex:new RegExp(t),vars:c}},a=function(n){delete e[n]};return{init:i,add:r,remove:a,trigger:o}};