Arenite.LocationRouter=function(n){var o,e={},t=function(n,o){n=n.replace(/\/{2,}/,"/"),e.toKeyArray(e).forEach(function(t){var i=e[t].regex.exec(n);i&&(i.splice(0,1),a(t,i,e[t].vars,o?n:o))})},i=function(n){window.history.pushState(void 0,void 0,n+window.location.search+window.location.hash)},a=function(o,t,a,r){e[o].executions.forEach(function(e){r&&window.location.pathname!==r&&i(r);var c=JSON.parse(JSON.stringify(e));"function"==typeof e.func&&(c.func=e.func,c.args=[{ref:"arenite"}]),c.args||(c.args=[]);var u={};t.forEach(function(n,o){u[a[o]]=n}),c.args.push({value:u}),window.console.log('Arenite.Router: Executing route "'+o+'" with:',c),n.di.exec(c)})},r=function(){t(window.location.pathname)},c=function(n,e,i){o=e||"/",i||(window.onpopstate=function(n){t(window.location.pathname)}),n.toKeyArray().forEach(function(o){u(o,n[o])}),r()},u=function(n,o){var t="^"+n.replace(/:[^\/]+/g,"([^/]+)")+"$",i=n.match(/:[^\/]+/g);i.forEach(function(n,o){i[o]=n.substring(1)}),e[n]={executions:o,regex:new RegExp(t),vars:i}},f=function(n){delete e[n]};return{init:c,add:u,remove:f,trigger:t,update:i}};