Arenite.LocationRouter=function(n){var o={},e=function(n,e){0!==n.indexOf("#")&&(n="#"+n),o.toKeyArray(o).forEach(function(i){var r=o[i].regex.exec(n);r&&(r.splice(0,1),t(i,r,o[i].vars,e?n:e))})},i=function(n){0!==n.indexOf("#")&&(n="#"+n),window.history.pushState(void 0,void 0,n)},t=function(e,i,t,r){o[e].executions.forEach(function(o){if(r&&window.location.hash!==r)return void(window.location.hash=r);var c=JSON.parse(JSON.stringify(o));"function"==typeof o.func&&(c.func=o.func,c.args=[{ref:"arenite"}]),c.args||(c.args=[]);var a={};i.forEach(function(n,o){a[t[o]]=n}),c.args.push({value:a}),window.console.log('Arenite.Router: Executing route "'+e+'" with:',c),n.di.exec(c)})},r=function(){e(window.location.hash)},c=function(n,o){o||(document.body.onhashchange=r),n.toKeyArray().forEach(function(o){a(o,n[o])}),r()},a=function(n,e){var i="^#"+n.replace(/:[^\/]+/g,"([^/]+)")+"$",t=n.match(/:[^\/]+/g);t.forEach(function(n,o){t[o]=n.substring(1)}),o[n]={executions:e,regex:new RegExp(i),vars:t}},u=function(n){delete o[n]};return{init:c,add:a,remove:u,trigger:e,update:i}};